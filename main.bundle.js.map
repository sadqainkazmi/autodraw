{"version":3,"sources":["webpack:///./src/app/app.component.scss","webpack:///./src/app/app.component.html","webpack:///./src/app/services/index.ts","webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/services/auto-draw.service.ts","webpack:///./src/environments/environment.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".canvas {\\n  width: 365px;\\n  margin-bottom: 55px;\\n  vertical-align: top; }\\n  .canvas canvas {\\n    border: 1px solid #B3C8B6;\\n    display: block;\\n    background-color: white; }\\n  .canvas .clear-canvas-button {\\n    margin-top: 10px;\\n    padding: 7px;\\n    font-size: 16px;\\n    border-radius: 5px;\\n    color: white;\\n    background-color: #ff4f75;\\n    cursor: pointer;\\n    position: absolute;\\n    margin-bottom: 40px;\\n    outline: none; }\\n\\n.canvas, .autodraw-results {\\n  margin-top: 45px;\\n  margin-left: 40px; }\\n\\n.canvas, .autodraw-results, canvas {\\n  border-radius: 10px;\\n  display: inline-block; }\\n\\n.autodraw-results {\\n  width: 650px;\\n  height: 350px;\\n  overflow-y: auto;\\n  background-color: white;\\n  box-shadow: 0px 1px 8px #B3C8B6; }\\n\\n.autodraw-image {\\n  border: 1px solid #B3C8B6;\\n  display: inline-block;\\n  width: 90px;\\n  height: 90px;\\n  padding: 0;\\n  margin: 5px;\\n  cursor: pointer; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.scss\n// module id = 141\n// module chunks = 1","module.exports = \"<header>\\r\\n  <h1>AutoDraw<br><h2>An Intelligent App</h2></h1>\\r\\n  <h2>Artificial Intelligent Project | PAF-Kiet 102470</h2>\\r\\n \\r\\n</header>\\r\\n\\r\\n<div class=\\\"canvas\\\">\\r\\n  <canvas #canvas width=\\\"350\\\" height=\\\"350\\\"></canvas>\\r\\n  <button type=\\\"button\\\" class=\\\"clear-canvas-button\\\" (click)=\\\"eraseCanvas()\\\">Clear canvas</button>\\r\\n</div>\\r\\n\\r\\n\\r\\n<div class=\\\"autodraw-results\\\">\\r\\n  <ng-template ngFor [ngForOf]=\\\"drawSuggestions\\\" let-suggestion>\\r\\n    <figure class=\\\"autodraw-image\\\" *ngFor=\\\"let icon of suggestion.icons\\\" (click)=\\\"pickSuggestion(icon)\\\">\\r\\n      <img src=\\\"{{ icon }}\\\" width=\\\"90\\\" height=\\\"90\\\" alt=\\\"{{ suggestion.name }}\\\" title=\\\"{{ suggestion.name }}\\\">\\r\\n    </figure>\\r\\n  </ng-template>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 142\n// module chunks = 1","export { AutoDrawService } from './auto-draw.service';\n\n\n// WEBPACK FOOTER //\n// ./src/app/services/index.ts","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 77;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 77\n// module chunks = 1","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { AutoDrawService } from './services';\r\nimport 'rxjs/add/observable/fromEvent';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent implements OnInit, OnDestroy {\r\n\r\n  constructor (\r\n    private autoDrawService: AutoDrawService\r\n  ) {}\r\n\r\n  @ViewChild('canvas') canvas;\r\n\r\n  drawSuggestions: Array<object>;\r\n\r\n  canvasMouseEventSubscriptions: Subscription[];\r\n\r\n  previousXAxis: number = 0;\r\n  previousYAxis: number = 0;\r\n  currentXAxis:  number = 0;\r\n  currentYAxis:  number = 0;\r\n\r\n  context;\r\n  pressedAt: number;\r\n  pressing:  boolean = false;\r\n  currentShape: Array<number[]>;\r\n  shapes: Array<Array<number[]>> = [];\r\n  intervalLastPosition: number[] = [-1, -1];\r\n\r\n  ngOnInit () {\r\n    this.autoDrawService.loadStencils();\r\n    this.context = this.canvas.nativeElement.getContext('2d');\r\n    let mouseEvents = ['mousemove', 'mousedown', 'mouseup', 'mouseout'];\r\n\r\n    this.canvasMouseEventSubscriptions = mouseEvents.map(\r\n      (mouseEvent: string) => Observable\r\n        .fromEvent(this.canvas.nativeElement, mouseEvent)\r\n        .subscribe((event: MouseEvent) => this.draw(event))\r\n    );\r\n  }\r\n\r\n  ngOnDestroy () {\r\n    for (let mouseEventSubscription of this.canvasMouseEventSubscriptions) {\r\n      mouseEventSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  eraseCanvas () {\r\n    this.shapes = [];\r\n    this.context.clearRect(0, 0, this.canvas.nativeElement.width, this.canvas.nativeElement.height);\r\n  }\r\n\r\n  prepareNewShape () {\r\n    this.currentShape = [\r\n      [], // X coordinates\r\n      [], // Y coordinates\r\n      []  // Times\r\n    ];\r\n  }\r\n\r\n  storeCoordinates() {\r\n    if (this.intervalLastPosition[0] !== this.previousXAxis && this.intervalLastPosition[1] !== this.previousYAxis) {\r\n      this.intervalLastPosition = [this.previousXAxis, this.previousYAxis];\r\n      this.currentShape = [\r\n        [...this.currentShape[0], this.previousXAxis],\r\n        [...this.currentShape[1], this.previousYAxis],\r\n        [...this.currentShape[2], Date.now() - this.pressedAt]\r\n      ];\r\n    }\r\n  }\r\n\r\n  onDrawingMouseDown (mouseEvent: MouseEvent) {\r\n    let highlightStartPoint, drawColorStartingPoint = 'black';\r\n\r\n    this.previousXAxis = this.currentXAxis;\r\n    this.previousYAxis = this.currentYAxis;\r\n    this.currentXAxis = mouseEvent.clientX - this.canvas.nativeElement.offsetLeft;\r\n    this.currentYAxis = mouseEvent.clientY - this.canvas.nativeElement.offsetTop;\r\n\r\n    this.pressing = true;\r\n    this.pressedAt = Date.now();\r\n    highlightStartPoint = true;\r\n\r\n    this.prepareNewShape();\r\n\r\n    if (highlightStartPoint) {\r\n      this.context.beginPath();\r\n      this.context.fillStyle = drawColorStartingPoint;\r\n      this.context.fillRect(this.currentXAxis, this.currentYAxis, 2, 2);\r\n      this.context.closePath();\r\n      highlightStartPoint = false;\r\n    }\r\n\r\n    // Stores coordinates every 9ms\r\n    return window.setInterval(() => this.storeCoordinates(), 9);\r\n  }\r\n\r\n  onDrawingMouseMove (mouseEvent: MouseEvent) {\r\n    let drawStroke = 8, drawColor  = 'black';\r\n\r\n    this.previousXAxis = this.currentXAxis;\r\n    this.previousYAxis = this.currentYAxis;\r\n    this.currentXAxis = mouseEvent.clientX - this.canvas.nativeElement.offsetLeft;\r\n    this.currentYAxis = mouseEvent.clientY - this.canvas.nativeElement.offsetTop;\r\n\r\n    this.context.beginPath();\r\n    this.context.moveTo(this.previousXAxis, this.previousYAxis);\r\n    this.context.lineTo(this.currentXAxis, this.currentYAxis);\r\n    this.context.strokeStyle = drawColor;\r\n    this.context.fillStyle = drawColor;\r\n    this.context.lineCap = 'round';\r\n    this.context.lineJoin = 'round';\r\n    this.context.lineWidth = drawStroke;\r\n    this.context.stroke();\r\n    this.context.closePath();\r\n  }\r\n\r\n  draw(mouseEvent: MouseEvent) {\r\n    let storeCoordinateInterval;\r\n\r\n    if (mouseEvent.type === 'mousedown') {\r\n      storeCoordinateInterval = this.onDrawingMouseDown(mouseEvent);\r\n    }\r\n\r\n    if (mouseEvent.type === 'mouseup' || this.pressing && mouseEvent.type === 'mouseout') {\r\n      this.pressing = false;\r\n      clearInterval(storeCoordinateInterval);\r\n      this.commitCurrentShape();\r\n    }\r\n\r\n    if (mouseEvent.type === 'mousemove' && this.pressing) {\r\n      this.onDrawingMouseMove(mouseEvent);\r\n    }\r\n  }\r\n\r\n  commitCurrentShape() {\r\n    this.shapes.push(this.currentShape);\r\n    let drawOptions = {\r\n      canvasWidth: this.canvas.nativeElement.width,\r\n      canvasHeight: this.canvas.nativeElement.height\r\n    };\r\n\r\n    this.autoDrawService.drawSuggestions(this.shapes, drawOptions)\r\n      .subscribe(suggestions => this.drawSuggestions = suggestions);\r\n  }\r\n\r\n  pickSuggestion(source: string) {\r\n    this.eraseCanvas();\r\n    let image = new Image();\r\n    image.onload = () => this.context.drawImage(image, 0, 0);\r\n    image.src = source;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HttpModule } from '@angular/http';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { AutoDrawService } from './services';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    FormsModule,\r\n    HttpModule\r\n  ],\r\n  providers: [\r\n    AutoDrawService\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Headers, RequestOptions, Http } from '@angular/http';\r\nimport { Injectable } from '@angular/core';\r\nimport 'rxjs/add/operator/map';\r\n\r\nconst API_ENDPOINT = 'https://inputtools.google.com/request?ime=handwriting&app=autodraw&dbg=1&cs=1&oe=UTF-8';\r\nconst STENCILS_ENDPOINT = 'src/data/stencils.json';\r\n\r\n@Injectable()\r\nexport class AutoDrawService {\r\n\r\n  stencils;\r\n\r\n  constructor(\r\n    private http: Http\r\n  ) { }\r\n\r\n  loadStencils () {\r\n    this.http.get(STENCILS_ENDPOINT).subscribe(response => this.stencils = response.json());\r\n  }\r\n\r\n  drawSuggestions (\r\n    shapes: Array<Array<number[]>>, drawOptions: {\r\n    canvasWidth: number,\r\n    canvasHeight: number\r\n  }) {\r\n    let headers = new Headers({\r\n      'Content-Type': 'application/json; charset=utf-8'\r\n    });\r\n    let options = new RequestOptions({ headers });\r\n\r\n    return this.http.post(\r\n      API_ENDPOINT,\r\n      JSON.stringify({\r\n        input_type: 0,\r\n        requests: [{\r\n          language: 'autodraw',\r\n          writing_guide: {\r\n            \"width\": drawOptions.canvasWidth,\r\n            \"height\": drawOptions.canvasHeight\r\n          },\r\n          ink: shapes\r\n        }]\r\n      }),\r\n      options\r\n    ).map(response => {\r\n      let data = response.json();\r\n      let results = JSON.parse(data[1][0][3].debug_info.match(/SCORESINKS: (.*) Service_Recognize:/)[1])\r\n        .map(result => {\r\n          return {\r\n            name: result[0],\r\n            icons: (this.stencils[result[0]] || []).map(collection => collection.src)\r\n          }\r\n        });\r\n      return results;\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/services/auto-draw.service.ts","export const environment = {\r\n  production: true\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts"],"sourceRoot":""}